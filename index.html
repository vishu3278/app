<!doctype html>
<html>

<head>
    <title>DR Solution</title>
    <meta charset=utf-8>
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name=viewport content="width=device-width,initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Oxanium:300,500&display=swap" rel=stylesheet>
    <link rel=stylesheet href=https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css> <link rel=icon href=favicon.ico>
    <title>qrscan</title>
    <link href=css/app.8fd093db.css rel=preload as=style>
    <link href=css/chunk-vendors.18521181.css rel=preload as=style>
    <link href=js/app.dc39b48f.js rel=preload as=script>
    <link href=js/chunk-vendors.5931c58b.js rel=preload as=script>
    <link href=css/chunk-vendors.18521181.css rel=stylesheet>
    <link href=css/app.8fd093db.css rel=stylesheet>
    
    <!-- <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script> -->
    <!-- <script type="text/javascript" src="js/app.js"></script> -->
    <script type="text/javascript">
    function initdevice() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    function onDeviceReady() {
        navigator.notification.alert("device ready");
        checkConnection();
        document.addEventListener("offline", onOffline, false);
        document.addEventListener("online", onOnline, false);
        // $("#result").html(window.sessionStorage.getItem('QRCODE'));
    }

    function onOffline() {
        navigator.notification.alert("You lost connection!");
    }

    function onOnline() {
        navigator.vibrate([200, 400, 200]);
        // navigator.notification.alert("You're connected");
    }

    function checkConnection() {
        var networkState = navigator.connection.type;

        var states = {};
        states[Connection.UNKNOWN] = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI] = 'WiFi connection';
        states[Connection.CELL_2G] = 'Cell 2G connection';
        states[Connection.CELL_3G] = 'Cell 3G connection';
        states[Connection.CELL_4G] = 'Cell 4G connection';
        states[Connection.CELL] = 'Cell generic connection';
        states[Connection.NONE] = 'No network connection';

        // $("#networkError").html(states[networkState]);
        // alert('Connection type: ' + states[networkState]);
        if (states[networkState] !== Connection.NONE) {
            navigator.vibrate([200, 400, 200]);
        } else {
            navigator.notification.alert("Connect to internet to proceed!");
        }
        return (states[networkState]);
    }

    var scanOptions = {
        'prompt_message': 'Scan a Code', // Change the info message. A blank message ('') will show a default message
        'orientation_locked': false, // Lock the orientation screen
        'camera_id': 0, // Choose the camera source
        'beep_enabled': true, // Enables a beep after the scan
        'scan_type': 'normal', // Types of scan mode: normal = default black with white background / inverted = white bars on dark background / mixed = normal and inverted modes
        'barcode_formats': [
            'QR_CODE',
            'CODE_39',
            'CODE_128'
        ], // Put a list of formats that the scanner will find. A blank list ([]) will enable scan of all barcode types
        'extras': {} // Additional extra parameters. See [ZXing Journey Apps][1] IntentIntegrator and Intents for more details
    }

    function scanQR(arguments) {
        // alert("initiate");
        window.plugins.zxingPlugin.scan(scanOptions, onSuccess, onFailure);

        function onSuccess(result) {
            navigator.vibrate([200, 200, 200, 100, 100]);
            navigator.notification.alert(result);
            window.sessionStorage.setItem('QRCODE', result);
        }

        function onFailure(err) {
            navigator.notification.alert(err);
        }
    }

    function cameraGo() {
        var options = {
            sourceType: Camera.PictureSourceType.CAMERA,
            //        sourceType:Camera.PictureSourceType.PHOTOLIBRARY,
            //        quality:50,
            destinationType: Camera.DestinationType.FILE_URI
        };

        navigator.camera.getPicture(successCallback, errorCallback, options);

        function successCallback(imageURI) {
            $("#capturi").html(imageURI);
            $("#capture").attr('src', imageURI);
        };

        function errorCallback(message) {
            alert(message);
        }
    }

    function cameraClean() {
        navigator.camera.cleanup(onSuccess, onFail);

        function onSuccess() {
            console.log("Camera cleanup success.")
        }

        function onFail(message) {
            alert('Failed because: ' + message);
        }
    }
        function exitApp(){
            navigator.app.exitApp();
         }
    </script>
</head>

<body onload="initdevice()">
    <noscript><strong>We're sorry but qrscan doesn't work properly without JavaScript enabled. Please enable it to continue.</strong></noscript>
    <div id="app"></div>
    
    <script src=js/chunk-vendors.5931c58b.js> </script> <script src=js/app.dc39b48f.js> </script>
    <script type="text/javascript" src="cordova.js"></script>
</body>

</html>
